/* ---------- Base (mobile-first) ---------- */
:root{
  --pink:#ff6fa5;
  --pink2:#ff89b6;
  --bg:#fff5fa;
  --text:#5a3150;
  --btn-radius:999px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
html{ -webkit-text-size-adjust:100%; }
body{
  margin:0;
  background: radial-gradient(1200px 800px at 50% -200px, #ffe3f0 0%, #ffeef6 35%, var(--bg) 60%);
  color:var(--text);
  font-family:"Mali", system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans Thai", sans-serif;
  overflow-x:hidden;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.wrap{
  min-height:100dvh;
  display:grid;
  place-items:center;
  padding:24px;
  position:relative;
  isolation:isolate;
  padding-bottom: calc(24px + env(safe-area-inset-bottom, 0px));
}

.card{
  background:#ffffffcc;
  backdrop-filter: blur(6px);
  border:2px solid #ffd3e6;
  border-radius:24px;
  padding:24px 18px 18px;
  width:min(640px, 92vw);
  box-shadow: 0 12px 30px #ff83b22a, 0 3px 10px #ff83b218;
  text-align:center;
  position:relative;
}

h1{
  margin:0 0 10px;
  font-size: clamp(22px, 6vw, 32px);
  line-height:1.2;
  letter-spacing:.4px;
}
.sub{ opacity:.85; margin:0 0 10px; font-size:clamp(14px,4vw,18px); }
.msg{ margin:6px 0 8px; font-size:14px; opacity:.9; min-height:1.4em; }

/* ---------- Heart ---------- */
.heart-box{ display:grid; place-items:center; margin:6px auto 14px; }
.heart{
  width:96px; height:96px; position:relative;
  transform: rotate(-45deg);
  animation: beat 1.1s ease-in-out infinite, floaty 6s ease-in-out infinite;
}
.heart, .heart::before, .heart::after{
  background: linear-gradient(135deg, var(--pink), var(--pink2));
}
.heart::before, .heart::after{
  content:""; position:absolute; width:96px; height:96px; border-radius:50%;
}
.heart::before{ top:-48px; left:0; }
.heart::after{ left:48px; top:0; }

@keyframes beat{
  0%, 100%{ transform: rotate(-45deg) scale(1); }
  15%{ transform: rotate(-45deg) scale(1.12); }
  30%{ transform: rotate(-45deg) scale(0.98); }
  45%{ transform: rotate(-45deg) scale(1.06); }
  60%{ transform: rotate(-45deg) scale(1.0); }
}
@keyframes floaty{
  0%,100%{ filter: drop-shadow(0 10px 20px #ff7fb722); }
  50%{ filter: drop-shadow(0 18px 30px #ff7fb730); }
}

/* ---------- Buttons (big touch targets) ---------- */
.btns{
  display:flex; gap:12px; justify-content:center; align-items:center; flex-wrap:wrap;
  margin-top:8px;
}
button{
  cursor:pointer;
  border:none;
  border-radius:var(--btn-radius);
  padding:14px 24px;
  min-height:48px; /* mobile touch target */
  min-width: 120px;
  font-size:clamp(16px, 4.8vw, 20px);
  font-weight:700;
  transition: transform .18s ease, box-shadow .18s ease, background .2s ease, opacity .3s ease;
  box-shadow: 0 6px 18px #ff7fb222, inset 0 -2px 0 #00000012;
  user-select:none;
}
.btn-big{ width: calc(50% - 6px); }
.yes{
  background: linear-gradient(180deg, #ff9cc7 0%, #ff6fa5 100%);
  color:white;
}
.no{
  background:#ffe3ef; color:#b33c74; border:2px solid #ffc4dd;
}
button:hover{ transform: translateY(-2px); }
button:active{ transform: translateY(0) scale(.98); }
.no:hover{ transform:none !important; } /* กันทับกับสคริปต์หลบ */

/* หายไปหลังครบ 5 ครั้ง */
.fade-out{ opacity:0; pointer-events:none; transform:scale(.8); transition:opacity .3s ease, transform .3s ease; }

/* ---------- Star rain ---------- */
.stars-layer{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:20; }
.star{
  position:fixed; top:-20px; left:0;
  font-size:16px; line-height:1;
  color:#ffd700;
  filter: drop-shadow(0 0 3px #ffe27a);
  animation: fall linear forwards;
  transform: translateY(-20px) rotate(0deg);
  will-change: transform;
}
@keyframes fall{ to { transform: translateY(110vh) rotate(360deg); opacity:1; } }

/* ---------- Overlay image ---------- */
.overlay{
  position:fixed; inset:0; z-index:30; display:grid; place-items:center;
  background: radial-gradient(1000px 600px at 50% -120px, #ffd8ea88, #ffecf6aa 40%, #fff0f780 60%, #fff8fc00 80%);
  opacity:0; pointer-events:none; transition: opacity .6s ease;
}
.overlay.show{ opacity:1; pointer-events:auto; }
.overlay img{
  position:absolute; inset:50% auto auto 50%;
  transform: translate(-50%,-50%) scale(.1);
  width:100vw; height:100dvh; object-fit:cover; object-position:center;
  border-radius: 12px;
  box-shadow: 0 20px 50px #ff7fb744;
  animation: zoomFill 4.5s ease forwards;
}
@keyframes zoomFill{
  0%{ transform: translate(-50%,-50%) scale(.1); opacity:0 }
  20%{ opacity:1 }
  100%{ transform: translate(-50%,-50%) scale(1.05); }
}

/* ---------- Floating background hearts ---------- */
.float-hearts{
  position:fixed; inset:0; z-index:-1; overflow:hidden; pointer-events:none;
}
.float-hearts .h{
  position:absolute; bottom:-20px; font-size:12px; color:#ff9cc7aa;
  animation: rise 8s linear infinite;
}
@keyframes rise{
  0%   { transform: translateY(0) translateX(0) scale(.9); opacity:0}
  10%  { opacity:.7}
  100% { transform: translateY(-110vh) translateX(20px) scale(1.3); opacity:0}
}

/* ---------- Share button (safe-area) ---------- */
.share-btn{
  position:absolute;
  top: calc(env(safe-area-inset-top, 0px) + 12px);
  right: calc(env(safe-area-inset-right, 0px) + 12px);
  border:none; border-radius:999px; padding:10px 16px;
  font-weight:700; cursor:pointer;
  background:#ffffffcc; color:#b33c74; border:2px solid #ffc4dd;
  box-shadow:0 6px 16px #ff7fb222;
}
.share-btn:hover{ transform: translateY(-1px); }
.share-btn:active{ transform: translateY(0); }

/* ---------- Accessibility: reduce motion ---------- */
@media (prefers-reduced-motion: reduce){
  * { animation: none !important; transition: none !important; }
  .star{ display:none !important; } /* ไม่แสดงฝนดาว */
}

/* ---------- Tablet / Desktop tweaks ---------- */
@media (min-width:600px){
  .btn-big{ width:auto; min-width:160px; }
  .heart{ width:110px; height:110px; }
  .heart::before, .heart::after{ width:110px; height:110px; }
}
